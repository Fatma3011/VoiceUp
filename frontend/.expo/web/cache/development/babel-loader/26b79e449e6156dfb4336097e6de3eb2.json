{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Rania Dhahbi\\\\Desktop\\\\VoiceUp-nourhene\\\\VoiceUp-nourhene\\\\frontend\\\\src\\\\screens\\\\Interface.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Audio } from \"expo-av\";\nimport { useState, useRef } from \"react\";\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    backgroundColor: '#ecf0f1',\n    padding: 8\n  },\n  record: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 15,\n    backgroundColor: 'black',\n    marginBottom: 9,\n    width: 200,\n    height: 30\n  }\n});\n\nfunction Interface(_ref) {\n  var _this = this;\n\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      recording = _useState2[0],\n      setRecording = _useState2[1];\n\n  var AudioPlayer = useRef(new Audio.Sound());\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      IsPLaying = _useState4[0],\n      SetIsPLaying = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      URI = _useState6[0],\n      setUri = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      messages = _useState8[0],\n      setMessages = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      Id = _useState10[0],\n      setId = _useState10[1];\n\n  var user_id = 30;\n  var talk_to_id = 14;\n\n  function startRecording() {\n    var _recording;\n\n    return _regeneratorRuntime.async(function startRecording$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            console.log('Requesting Submission ....');\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(Audio.requestPermissionsAsync());\n\n          case 4:\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(Audio.setAudioModeAsync({\n              allowsRecordingIOS: true,\n              playsInSilentModeIOS: true\n            }));\n\n          case 6:\n            console.log('start recording');\n            _recording = new Audio.Recording();\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(_recording.prepareToRecordAsync(Audio.RECORDING_OPTIONS_PRESET_HIGH_QUALITY));\n\n          case 10:\n            _context.next = 12;\n            return _regeneratorRuntime.awrap(_recording.startAsync());\n\n          case 12:\n            setRecording(_recording);\n            console.log('Recording started ...');\n            _context.next = 19;\n            break;\n\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](0);\n            console.error('Failed to start recording ', _context.t0);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 16]], Promise);\n  }\n\n  function stopRecording() {\n    var uri;\n    return _regeneratorRuntime.async(function stopRecording$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log('Stop recording ');\n            setRecording(undefined);\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(recording.stopAndUnloadAsync());\n\n          case 4:\n            uri = recording.getURI();\n            console.log(\"Recording stopped and stored at \", uri);\n            setUri(uri);\n            setMessages([].concat(_toConsumableArray(messages), [{\n              id: Id,\n              Uri: uri,\n              type: \"out\",\n              time: new Date().toLocaleString('en-GB', {\n                timeZone: 'UTC'\n              })\n            }]));\n            setId(Id + 1);\n            console.log(messages);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var PlayRecordedAudio = function PlayRecordedAudio(UR) {\n    var playerStatus;\n    return _regeneratorRuntime.async(function PlayRecordedAudio$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(AudioPlayer.current.loadAsync({\n              uri: UR\n            }, {}, true));\n\n          case 3:\n            _context3.next = 5;\n            return _regeneratorRuntime.awrap(AudioPlayer.current.getStatusAsync());\n\n          case 5:\n            playerStatus = _context3.sent;\n\n            if (playerStatus.isLoaded) {\n              if (playerStatus.isPlaying === false) {\n                AudioPlayer.current.playAsync();\n                SetIsPLaying(true);\n              }\n            }\n\n            _context3.next = 12;\n            break;\n\n          case 9:\n            _context3.prev = 9;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log(_context3.t0);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  var StopPlaying = function StopPlaying() {\n    var playerStatus;\n    return _regeneratorRuntime.async(function StopPlaying$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(AudioPlayer.current.getStatusAsync());\n\n          case 3:\n            playerStatus = _context4.sent;\n\n            if (!(playerStatus.isLoaded === true)) {\n              _context4.next = 7;\n              break;\n            }\n\n            _context4.next = 7;\n            return _regeneratorRuntime.awrap(AudioPlayer.current.unloadAsync());\n\n          case 7:\n            SetIsPLaying(false);\n            _context4.next = 13;\n            break;\n\n          case 10:\n            _context4.prev = 10;\n            _context4.t0 = _context4[\"catch\"](0);\n            console.log(_context4.t0);\n\n          case 13:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  };\n\n  var onpress = function onpress(rec) {\n    SetIsPLaying(false);\n\n    if (IsPLaying) {\n      StopPlaying();\n    } else PlayRecordedAudio(rec);\n  };\n\n  return React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 1\n    }\n  }, React.createElement(View, {\n    style: {\n      height: \"6%\",\n      justifyContent: 'center',\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 1\n    }\n  }, React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 3\n    }\n  }, \"Ichrak\")), React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 1\n    }\n  }, messages.length > 0 ? React.createElement(React.Fragment, null, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, messages.map(function (record) {\n    return React.createElement(View, {\n      key: record.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 38\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"black\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 61\n      }\n    }, record.time), React.createElement(View, {\n      style: styles.record,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, React.createElement(View, {\n      style: {\n        borderRadius: 12\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 19\n      }\n    }, React.createElement(Button, {\n      title: \"\",\n      onPress: function onPress() {\n        return onpress(record.Uri);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 23\n      }\n    }))));\n  }))) : React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 8\n    }\n  }, \"Say Hello!\")), React.createElement(View, {\n    style: {\n      position: 'absolute',\n      left: 0,\n      right: 0,\n      bottom: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 1\n    }\n  }, React.createElement(Button, {\n    title: recording ? 'Stop Recording' : 'Start Recording',\n    onPress: recording ? stopRecording : startRecording,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 1\n    }\n  })));\n}\n\nexport default Interface;","map":{"version":3,"sources":["C:/Users/Rania Dhahbi/Desktop/VoiceUp-nourhene/VoiceUp-nourhene/frontend/src/screens/Interface.js"],"names":["React","Audio","useState","useRef","styles","StyleSheet","create","container","flex","justifyContent","backgroundColor","padding","record","alignItems","borderRadius","marginBottom","width","height","Interface","route","navigation","recording","setRecording","AudioPlayer","Sound","IsPLaying","SetIsPLaying","URI","setUri","messages","setMessages","Id","setId","user_id","talk_to_id","startRecording","console","log","requestPermissionsAsync","setAudioModeAsync","allowsRecordingIOS","playsInSilentModeIOS","Recording","prepareToRecordAsync","RECORDING_OPTIONS_PRESET_HIGH_QUALITY","startAsync","error","stopRecording","undefined","stopAndUnloadAsync","uri","getURI","id","Uri","type","time","Date","toLocaleString","timeZone","PlayRecordedAudio","UR","current","loadAsync","getStatusAsync","playerStatus","isLoaded","isPlaying","playAsync","StopPlaying","unloadAsync","onpress","rec","length","map","color","position","left","right","bottom"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {View,Text, Button,StyleSheet,Image} from \"react-native\";\r\nimport {Audio} from \"expo-av\";\r\nimport { useState,useRef } from \"react\";\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      justifyContent: 'center',\r\n      backgroundColor: '#ecf0f1',\r\n      padding: 8,\r\n    },\r\n    record :{\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    borderRadius:15,\r\n    backgroundColor: 'black',\r\n    marginBottom:9,\r\n    width: 200, \r\n    height: 30,\r\n      },\r\n\r\n\r\n  });\r\n\r\n\r\nfunction Interface({ route, navigation }){\r\n    const [recording, setRecording]=useState();\r\n    const AudioPlayer = useRef(new Audio.Sound());\r\n    const [IsPLaying, SetIsPLaying] = useState(false);\r\n    const [URI, setUri]=useState('');\r\n    const [messages,setMessages]=useState([/*{\r\n        id: 1000,Uri:\"\", type:\"in\"\r\n    }*/])\r\n    const [Id,setId]=useState(0)\r\n\r\n    const user_id=30;//à modifier\r\n    const talk_to_id=14//à modifier\r\n    async function startRecording(){\r\n      try{\r\n\r\n        console.log('Requesting Submission ....')\r\n        await Audio.requestPermissionsAsync();\r\n        await Audio.setAudioModeAsync({\r\n\r\n            allowsRecordingIOS:true, playsInSilentModeIOS:true\r\n        });\r\n        console.log('start recording')\r\n        const recording=new Audio.Recording();\r\n        await recording.prepareToRecordAsync(Audio.RECORDING_OPTIONS_PRESET_HIGH_QUALITY);\r\n        await recording.startAsync();\r\n        setRecording(recording)\r\n        console.log('Recording started ...');\r\n\r\n      } catch(err){\r\n\r\n        console.error('Failed to start recording ',err)\r\n      }\r\n\r\n    }\r\n    async function stopRecording(){\r\n\r\n        console.log('Stop recording ')\r\n        setRecording(undefined);\r\n        await recording.stopAndUnloadAsync();\r\n        const uri=recording.getURI();\r\n        console.log(\"Recording stopped and stored at \",uri);\r\n        setUri(uri);\r\n        setMessages([... messages,{\r\n            id: Id,Uri:uri, type:\"out\",time:new Date().toLocaleString('en-GB', { timeZone: 'UTC' })\r\n        }])\r\n        setId(Id+1)\r\n        console.log(messages)\r\n    }\r\n\r\n\r\n    const PlayRecordedAudio = async (UR) => {\r\n        try {\r\n          // Load the Recorded URI\r\n          await AudioPlayer.current.loadAsync({ uri: UR}, {}, true);\r\n          // Get Player Status\r\n          const playerStatus = await AudioPlayer.current.getStatusAsync();\r\n    \r\n          // Play if song is loaded successfully\r\n          if (playerStatus.isLoaded) {\r\n            if (playerStatus.isPlaying === false) {\r\n              AudioPlayer.current.playAsync();\r\n              SetIsPLaying(true);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      };\r\n      // Function to stop the playing audio\r\n  const StopPlaying = async () => {\r\n    try {\r\n      //Get Player Status\r\n      const playerStatus = await AudioPlayer.current.getStatusAsync();\r\n\r\n      // If song is playing then stop it\r\n      if (playerStatus.isLoaded === true)\r\n        await AudioPlayer.current.unloadAsync();\r\n\r\n      SetIsPLaying(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n const onpress=(rec)=>{\r\n   SetIsPLaying(false);\r\n       if(IsPLaying)\r\n       {StopPlaying()}\r\n       else\r\n       PlayRecordedAudio(rec)\r\n  }\r\nreturn(\r\n\r\n<View style={{flex: 1}}>\r\n<View style={{height:\"6%\",justifyContent: 'center', alignItems:\"center\"}}>\r\n  <Text>Ichrak</Text>\r\n</View>\r\n<View style={styles.container}>\r\n\r\n{messages.length > 0 ? (\r\n        <>\r\n          <View>\r\n          {messages.map((record) => (< View key={record.id}><Text style={{color:\"black\"}}  >{record.time}</Text>\r\n              <View style={styles.record} >\r\n                  <View  style={{borderRadius:12}}>\r\n                      <Button title=\"\" onPress={()=>onpress(record.Uri)}></Button>\r\n                  </View>\r\n              </View></View>)  \r\n               \r\n          )}\r\n          </View>\r\n        </>\r\n      ) : (\r\n       <Text>Say Hello!</Text>\r\n      )}\r\n\r\n\r\n</View>\r\n<View style={{position: 'absolute', left: 0, right: 0, bottom: 0}}>\r\n<Button title={recording?'Stop Recording':'Start Recording'}\r\n    onPress={recording ? stopRecording :startRecording }>\r\n   \r\n</Button>\r\n</View>\r\n</View>\r\n\r\n\r\n);\r\n}\r\nexport default Interface;"]},"metadata":{},"sourceType":"module"}